<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>มินิเกมอนามัย: ล้างมือ 7 ขั้น (ป.5)</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <style>
    body { margin:0; background:#000; }
    .noselect { user-select:none; -webkit-user-select:none; -ms-user-select:none; }
  </style>
</head>
<body class="noselect">
  <a-scene renderer="antialias: true; colorManagement: true" vr-mode-ui="enabled: true">
    <!-- ASSETS -->
    <a-assets timeout="10000">
      <!-- Simple placeholder images for each step (replace with real PNGs later) -->
      <img id="step1" src="assets/step1.png">
      <img id="step2" src="assets/step2.png">
      <img id="step3" src="assets/step3.png">
      <img id="step4" src="assets/step4.png">
      <img id="step5" src="assets/step5.png">
      <img id="step6" src="assets/step6.png">
      <img id="step7" src="assets/step7.png">
      <img id="bg"    src="assets/bg.png">
      <img id="ok"    src="assets/ok.png">
      <img id="no"    src="assets/no.png">
    </a-assets>

    <!-- SKY / BACKGROUND -->
    <a-sky src="#bg" color="#EEF5FF"></a-sky>

    <!-- CAMERA + CURSOR -->
    <a-entity id="rig" position="0 1.6 0">
      <a-entity id="camera" camera look-controls wasd-controls>
        <a-entity 
          cursor="fuse: true; fuseTimeout: 800"
          position="0 0 -1"
          geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
          material="color: white; shader: flat; opacity: 0.9">
        </a-entity>
      </a-entity>
    </a-entity>

    <!-- UI PANELS (fixed in front of camera) -->
    <a-entity id="uiRoot" position="0 0 -2">
      <!-- Splash -->
      <a-entity id="splash" visible="true">
        <a-plane width="1.4" height="0.9" color="#1f2937" material="opacity:0.98" radius="0.06"></a-plane>
        <a-text value="Healthy Hero VR
มินิเกม: ล้างมือ 7 ขั้น (ป.5)" color="#ffffff" width="1.2" align="center" position="0 0.28 0"></a-text>
        <a-text value="แตะปุ่มเพื่อเริ่ม • โหมดฝึก = ไม่จับเวลา • โหมดจับเวลา = 60 วินาที" color="#d1fae5" width="1.2" align="center" position="0 0.12 0"></a-text>

        <a-entity id="btnPractice" class="clickable"
                  geometry="primitive: plane; width: 0.55; height: 0.13"
                  material="color: #10b981; opacity: 0.95" position="-0.35 -0.12 0" handwash-button="label: โหมดฝึก (Practice)">
        </a-entity>
        <a-entity id="btnTimed" class="clickable"
                  geometry="primitive: plane; width: 0.55; height: 0.13"
                  material="color: #3b82f6; opacity: 0.95" position="0.35 -0.12 0" handwash-button="label: โหมดจับเวลา (60s)">
        </a-entity>
        <a-text value="วิธีเล่น: แตะวงสีเขียวตามลำดับขั้นตอนให้ถูกต้อง
(ผิด = หักคะแนน) • ครบ 7 ขั้น = ชนะ" color="#93c5fd" width="1.2" align="center" position="0 -0.34 0"></a-text>
      </a-entity>

      <!-- HUD top bar -->
      <a-entity id="hud" position="0 0.36 0" visible="false">
        <a-plane width="1.6" height="0.12" color="#111827" material="opacity:0.9"></a-plane>
        <a-text id="hudMode" value="" color="#FDE68A" width="1.6" align="left" position="-0.75 -0.015 0"></a-text>
        <a-text id="hudTime" value="" color="#93C5FD" width="1.6" align="center" position="0 -0.015 0"></a-text>
        <a-text id="hudScore" value="" color="#A7F3D0" width="1.6" align="right" position="0.75 -0.015 0"></a-text>
      </a-entity>

      <!-- Board: step image + nodes -->
      <a-entity id="board" visible="false" position="0 0 0.01">
        <a-plane width="1.6" height="0.9" color="#0b1220" material="opacity:0.9" radius="0.06"></a-plane>
        <a-plane id="stepImage" width="1.1" height="0.62" position="0 0.06 0" material="src: #step1; opacity:1; transparent:true; color:#ffffff" color="#ffffff"></a-plane>

        <!-- 7 target nodes (arranged around the image) -->
        <!-- positions chosen for visibility; images guide the student -->
        <a-entity id="nodes" handwash-nodes position="0 -0.27 0"></a-entity>
      </a-entity>

      <!-- Result panel -->
      <a-entity id="result" visible="false">
        <a-plane width="1.4" height="0.9" color="#1f2937" material="opacity:0.98" radius="0.06"></a-plane>
        <a-text id="resultTitle" value="ผลลัพธ์" color="#ffffff" width="1.2" align="center" position="0 0.3 0"></a-text>
        <a-text id="resultDetail" value="" color="#D1FAE5" width="1.2" align="center" position="0 0.08 0"></a-text>
        <a-text id="resultStars" value="" color="#FDE68A" width="1.2" align="center" position="0 -0.06 0"></a-text>
        <a-entity id="btnReplay" class="clickable"
                  geometry="primitive: plane; width: 0.55; height: 0.13"
                  material="color: #10b981; opacity: 0.95" position="-0.35 -0.26 0" handwash-button="label: เล่นอีกครั้ง">
        </a-entity>
        <a-entity id="btnMenu" class="clickable"
                  geometry="primitive: plane; width: 0.55; height: 0.13"
                  material="color: #6b7280; opacity: 0.95" position="0.35 -0.26 0" handwash-button="label: กลับเมนู">
        </a-entity>
      </a-entity>
    </a-entity>

    <script src="game.js"></script>
  </a-scene>
</body>
</html>
